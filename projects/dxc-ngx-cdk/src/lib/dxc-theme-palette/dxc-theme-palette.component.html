<div class="menu-arrow-up" *ngIf="enablePopupMode"></div>
<div class="theme-palette-border d-inline-block w-100" tabindex="{{disabled ? -1 : tabIndexValue}}"
  (keydown)="startKeyPress($event)" [attr.aria-label]="themePaletteLabel" role="{{enablePopupMode ? 'dialog' : 'region'" #dialogstart>
  <a href="javascript:void(0);" role="button" tabindex="{{disabled ? -1 : tabIndexValue}}" *ngIf="enablePopupMode"
  [attr.aria-label]="closeLabel" class="mr-2 view-icon closeIcon menuclose float-right" [matTooltip]="closeLabel"
  (click)="closeThemePalette()">
  <mat-icon class="mat-icon material-icons mat-icon-no-color">
    close
  </mat-icon>
  </a>
  <div class="container px-0 py-4">
    <div class="w-100">
      <span class="float-left px-2" *ngIf="showThemeToggle">
        <mat-icon [ngClass]="[themeInfo.isDarkMode ? 'mat-icon-no-color' : 'mat-icon-theme-color']" class="mat-icon material-icons  float-left pt-3">
          wb_sunny
        </mat-icon>
        <dxc-switch [checked]="themeInfo.isDarkMode" (onChange)="themeChange($event)" [ariaLabel]="switchLabel"></dxc-switch>
        <mat-icon [ngClass]="[!themeInfo.isDarkMode ? 'mat-icon-no-color' : 'mat-icon-theme-color']" class="mat-icon material-icons float-right pt-3">
          nightlight_round
        </mat-icon>
      </span>
      <span class="float-right px-2" *ngIf="showThemeToggle">
        <mat-icon [ngClass]="[themeInfo.isTransparent ? 'mat-icon-no-color' : 'mat-icon-theme-color']" class="mat-icon material-icons  float-left pt-3">
          blur_off
        </mat-icon>
        <dxc-switch [checked]="themeInfo.isTransparent" (onChange)="transparencyChange($event)"
          [ariaLabel]="backgroundSwitchLabel"></dxc-switch>
        <mat-icon [ngClass]="[!themeInfo.isTransparent ? 'mat-icon-no-color' : 'mat-icon-theme-color']" class="mat-icon material-icons float-right pt-3">
          blur_on
        </mat-icon>
      </span>
</div>
    <div class="w-100 d-inline-block" *ngIf="themeInfo.isTransparent">
      <div class="px-2 py-0">
        <p class="text-muted mb-2">{{backgroundLabel}}</p>
        <div class="theme-background w-100 theme-palette">
          <div [ngClass]="{ active: bg.active}" role="button" attr.aria-checked="{{bg.active}}" role="radio"
            tabindex="{{disabled ? -1 : tabIndexValue}}" attr.aria-label="{{backgroundLabel + ' ' + bg.title}}"
            *ngFor="let bg of themeInfo.backgrounds; let i = index" (click)="changeBackground(i)" (keyup.enter)="changeBackground(i)"
            class="theme-bg">
            <span class="toggle-button m-2">
              <i class="icon-container">
                <mat-icon aria-hidden="true" class="mat-icon material-icons mat-icon-theme-selected-color notranslate">
                  check</mat-icon>
              </i>
            </span>
            <span [innerHtml]="bg.background | safe:'html'"></span>
          </div>
        </div>
      </div>
    </div>
    <div class="theme-colors d-inline-block w-100">
      <div class="p-2">
        <p class="text-muted mb-2">{{label}}</p>
        <div class="d-flex flex-row justify-content-between theme-palette">
          <span [ngClass]="{ active: colors.active}" role="button" attr.aria-checked="{{colors.active}}" role="radio"
            tabindex="{{disabled ? -1 : tabIndexValue}}" attr.aria-label="{{label + ' ' + colors.color}}"
            *ngFor="let colors of themeInfo.themeColors; let i = index" (click)="changeThemeColor(i)"
            (keyup.enter)="changeThemeColor(i)"
            [ngStyle]="{'background-color': colors.color?.primary, 'border-color': colors.color?.primary}"
            class="theme-color">
            <i>
              <mat-icon aria-hidden="true" class="mat-icon material-icons mat-icon-theme-selected-color notranslate">
                check</mat-icon>
            </i>
          </span>
        </div>
      </div>
      <span #returntoend tabindex="-1" (onblur)="returnFocusOut($event)"></span>
      <span #dialogend tabindex="{{enablePopupMode ? 0 : -1}}" (focus)="endFocus($event)"></span>
    </div>
  </div>
</div>
